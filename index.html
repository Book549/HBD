<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
    <h1>ğŸ‰ à¸ªà¸¸à¸‚à¸ªà¸±à¸™à¸§à¸±à¸™à¹€à¸à¸´à¸”! ğŸ‚</h1>
    <h1 id="name">[à¸Šà¸·à¹ˆà¸­]</h1>
    <button id="play-button">â–¶ï¸ Play Birthday Song</button>

    <canvas id="confetti"></canvas>

    <audio id="birthday-audio" preload="auto">
        <source src="birthday.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
    </audio>

    <script>
        function getQueryValue(key) {
            const params = new URLSearchParams(window.location.search);
            return params.get(key);
        }
        const name = getQueryValue("name");
        document.getElementById("name").innerHTML = name || "à¸Šà¸·à¹ˆà¸­";

        // Confetti
        const canvas = document.getElementById("confetti");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const confetti = Array.from({length: 200}, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 6 + 4,
        d: Math.random() * 100 + 10,
        color: `hsl(${Math.random() * 360}, 100%, 70%)`,
        tilt: Math.random() * 10 - 5
        }));

        function drawConfetti() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        confetti.forEach(c => {
            ctx.beginPath();
            ctx.lineWidth = c.r;
            ctx.strokeStyle = c.color;
            ctx.moveTo(c.x + c.tilt + c.r / 2, c.y);
            ctx.lineTo(c.x + c.tilt, c.y + c.tilt + c.r / 2);
            ctx.stroke();
        });
        updateConfetti();
        }

        function updateConfetti() {
        confetti.forEach(c => {
            c.y += Math.cos(c.d) + 1 + c.r / 2;
            c.x += Math.sin(c.d);
            if (c.y > canvas.height) {
            c.x = Math.random() * canvas.width;
            c.y = -10;
            }
        });
        }

        setInterval(drawConfetti, 30);

        // Music
        const audio = document.getElementById("birthday-audio");
        const playButton = document.getElementById("play-button");

        playButton.addEventListener("click", () => {
        audio.play();
        playButton.style.display = "none";
        });

        // Greeting popup
        window.onload = () => {
        setTimeout(() => {
            alert("ğŸŠ à¸ªà¸¸à¸‚à¸ªà¸±à¸™à¸§à¸±à¸™à¹€à¸à¸´à¸”! " + name + "ğŸ");
        }, 1000);
            };
    </script>
</body>
</html>